# Plateau Utils

## 1. 概要
本リポジトリでは、2023年度のProject PLATEAUが開発した「Plateau Utils」のソースコードを公開しています。

「Plateau Utils」は、PLATEAUで公開されている3D都市モデル（CityGML・3DTiles/MVT）をパースして、Pythonに読み込むためのPythonライブラリです。

## 2. 「Plateau Utils」について
[「SAR衛星解析による洪水被害の推定システム」](https://github.com/Project-PLATEAU/SAR-image-based-flood-damage-detector)では、人工衛星観測データ（SARデータ）から分析した浸水範囲と3D都市モデルの地形モデル及び建築物モデルをマッチングさせることで、家屋単位での浸水深の算出および被災判定を行います。  
この処理の一部として、「Plateau Utils」は、3D都市モデルが持つ家屋の属性情報を抽出し、Pythonライブラリ上で扱えるようにする機能を提供します。

本システムの詳細については[技術検証レポート](https://www.mlit.go.jp/plateau/file/libraries/doc/plateau_tech_doc_0071_ver01.pdf)を参照してください。

## 3. 利用手順
本システムのインストール手順及び利用手順については[利用チュートリアル](https://project-plateau.github.io/PlateauUtils/)を参照してください。

## 4. システム概要
### 【3D都市モデルのパーサ】
#### ①3D都市モデル（CityGML）のパース
- 3D都市モデルのCityGMLのZIPファイルのURLを指定することで、3D都市モデルのパースを行うことができる。
- 3D都市モデルのCityGMLのZIPファイルのURLは[G空間情報センター](https://www.geospatial.jp/ckan/dataset/plateau)から取得できる。

#### ①3D都市モデル（3DTiles、MVT）のパース
- 3D都市モデルの3DTiles、MVTのZIPファイルのURLを指定することで、3D都市モデルのパースを行うことができる。
- 3D都市モデルの3DTiles、MVTのZIPファイルのURLは[G空間情報センター](https://www.geospatial.jp/ckan/dataset/plateau)から取得できる。

## 5. 利用技術

| 種別              | 名称   | バージョン | 内容 |
| ----------------- | --------|-------------|-----------------------------|
| ライブラリ      | click | 8.1.3 | コマンドラインインターフェース (CLI) を作成するためのライブラリ |
|       | numpy | 1.26.2 | 数値情報処理の根幹ライブラリ |
|       | pandas | 2.1.4 | データ解析や操作を容易にするためのデータ構造とツールを提供するライブラリ |
|       | Pillow | 10.0.1 | 幾何学的な操作を行うためのツールを提供するライブラリ |
|       | py3dtiles | 7.0.0 | 3D地理情報のためのタイルセットを生成・利用するためのイブラリ |
|       | pyproj | 3.6.1 | 座標変換用のライブラリ |
|       | requests | 2.31.0 | HTTPリクエストを行うためのライブラリ |
|       | shapely | 2.0.1 | Python Imaging Library (PIL) のフォークとして開発された画像処理ライブラリ |
|       | tqdm | 4.65.0 | データのダウンロードの進捗を表示 |

## 6. 動作環境
- 本ユースケースにおいては、動作環境としてGoogle Colaboratory（2024/02/01時点）を使用しています。

| 項目               | GoogleColaboratoryでの動作環境（2024/02/01時点）                                                                                                                                                                                                                                                                                                                                    | 推奨環境 |
| ------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ----------------- |
| CPU                | コア数2，スレッド数4                                                                                                                                                                                                                                                                                                                              |  同左 |
| GPU                | Tesla K80 GPU等                                                                                                                                                                                                                                                                                                                              |  同左 |
| メモリ             | 12.7GB以上                                                                                                                                                                                                                                                                                                                                          |  同左 |
| ネットワーク       | ネットワークからのダウンロード機能を使用しない場合はネットワーク環境は不要<br>ネットワークからのダウンロード機能を使用する場合、ネットワークを閲覧できる環境が必要<br> | 同左 |

## 7. 本リポジトリのフォルダ構成
| フォルダ名 |　詳細 |
|-|-|
| flood_converter | 浸水を3DTiles、PNG、XYZタイルへ変換する |
| mesh_geocorder | ポリゴンや地物をメッシュコードのリスト化する |
| parser | 読み込んだCityGMLやMVTをパースする |
| tile_list | ポリゴンや地物をタイル化する |

## 8. ライセンス

- ソースコード及び関連ドキュメントの著作権は国土交通省に帰属します。
- 本ドキュメントは[Project PLATEAUのサイトポリシー](https://www.mlit.go.jp/plateau/site-policy/)（CCBY4.0及び政府標準利用規約2.0）に従い提供されています。

## 9. 注意事項

- 本リポジトリは参考資料として提供しているものです。動作保証は行っていません。
- 本リポジトリについては予告なく変更又は削除をする可能性があります。
- 本リポジトリの利用により生じた損失及び損害等について、国土交通省はいかなる責任も負わないものとします。

## 10. 参考資料
- 技術検証レポート: https://www.mlit.go.jp/plateau/file/libraries/doc/plateau_tech_doc_0071_ver01.pdf
- PLATEAU WebサイトのUse caseページ「人工衛星観測データを用いた浸水被害把握等」: https://www.mlit.go.jp/plateau/use-case/uc23-01/
